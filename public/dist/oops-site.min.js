/*! oops-site 2020-11-28 */

!function(){"use strict";var e=angular.module("app",["ngStorage","ui.router","ngResource","ui.bootstrap","oc.lazyLoad","ngSanitize","ngAnimate","ngMessages","ngFileUpload","ui.bootstrap.contextMenu","angular-jwt","otpInputDirective","angularjs-dropdown-multiselect","dndLists","mwl.calendar"]);function t(e,t,a,r,o){t.otherwise("home"),e.state("home",{url:"/home",templateUrl:"app/modules/client/home.html",controller:"homeController",controllerAs:"homeController"}).state("verify-phone",{url:"/verify-phone",templateUrl:"app/modules/client/verify-phone.html",controller:"phoneVerifyController",controllerAs:"phoneVerifyController",data:{unAuth:!0}}).state("login",{url:"/login",templateUrl:"app/modules/client/login.html",controller:"loginController",controllerAs:"loginController",data:{unAuth:!0}}).state("register",{url:"/register",templateUrl:"app/modules/client/register.html",controller:"registerController",controllerAs:"registerController",data:{unAuth:!0}}).state("verify-email",{url:"/verify-email",templateUrl:"app/modules/client/verify-email.html",controller:"verifyEmailController",controllerAs:"verifyEmailController",data:{unAuth:!0}}).state("verifying-email",{url:"/verifying-email/{code}",templateUrl:"app/modules/client/verifying-email.html",controller:"verifyingEmailController",controllerAs:"verifyingEmailController",data:{unAuth:!0}}).state("diary",{url:"/diary",templateUrl:"app/modules/client/diary.html",controller:"diaryController",controllerAs:"diaryController"})}e.config(t),t.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","$provide","$localStorageProvider"],e.factory("uiHelpers",function(){return{uiHandleMain:function(){var e=jQuery("#content-container"),t=jQuery(window).height(),a=jQuery("#header-navbar").outerHeight(),r=jQuery("#page-footer").outerHeight();jQuery("#page-container").hasClass("header-navbar-fixed")?e.css("min-height",t-r):e.css("min-height",t-(a+r))},uiHandleHeader:function(){var e=jQuery("#page-container");e.hasClass("header-navbar-fixed")&&e.hasClass("header-navbar-transparent")&&jQuery(window).on("scroll",function(){jQuery(this).scrollTop()>20?e.addClass("header-navbar-scroll"):e.removeClass("header-navbar-scroll")})},uiHandleSidebar:function(){var e=jQuery("#nav-sidebar");"true"==e.attr("show")?e.attr("show","false"):e.attr("show","true")},uiLoader:function(e){var t=jQuery("body"),a=jQuery("#page-loader");"show"===e?a.length?a.fadeIn(250):t.prepend('<div id="page-loader"></div>'):"hide"===e&&a.length&&a.fadeOut(250)},uiBlocks:function(e,t,a){var r="si si-size-fullscreen";if("init"===t)switch(a.data("action")){case"fullscreen_toggle":a.html('<i class="'+(a.closest(".block").hasClass("block-opt-fullscreen")?"si si-size-actual":r)+'"></i>');break;case"content_toggle":a.html('<i class="'+(a.closest(".block").hasClass("block-opt-hidden")?"icon-arrow-down32":"icon-arrow-up32")+'"></i>');break;default:return!1}else{var o=e instanceof jQuery?e:jQuery(e);if(o.length){var n=jQuery('[data-js-block-option][data-action="fullscreen_toggle"]',o),i=jQuery('[data-js-block-option][data-action="content_toggle"]',o);switch(t){case"fullscreen_toggle":o.toggleClass("block-opt-fullscreen"),o.hasClass("block-opt-fullscreen")?jQuery(o).scrollLock("enable"):jQuery(o).scrollLock("disable"),n.length&&(o.hasClass("block-opt-fullscreen")?jQuery("i",n).removeClass(r).addClass("si si-size-actual"):jQuery("i",n).removeClass("si si-size-actual").addClass(r));break;case"fullscreen_on":o.addClass("block-opt-fullscreen"),jQuery(o).scrollLock("enable"),n.length&&jQuery("i",n).removeClass(r).addClass("si si-size-actual");break;case"fullscreen_off":o.removeClass("block-opt-fullscreen"),jQuery(o).scrollLock("disable"),n.length&&jQuery("i",n).removeClass("si si-size-actual").addClass(r);break;case"content_toggle":o.toggleClass("block-opt-hidden"),i.length&&(o.hasClass("block-opt-hidden")?jQuery("i",i).removeClass("icon-arrow-up32").addClass("icon-arrow-down32"):jQuery("i",i).removeClass("icon-arrow-down32").addClass("icon-arrow-up32"));break;case"content_hide":o.addClass("block-opt-hidden"),i.length&&jQuery("i",i).removeClass("icon-arrow-up32").addClass("icon-arrow-down32");break;case"content_show":o.removeClass("block-opt-hidden"),i.length&&jQuery("i",i).removeClass("icon-arrow-down32").addClass("icon-arrow-up32");break;case"refresh_toggle":o.toggleClass("block-opt-refresh"),jQuery('[data-js-block-option][data-action="refresh_toggle"][data-action-mode="demo"]',o).length&&setTimeout(function(){o.removeClass("block-opt-refresh")},2e3);break;case"state_loading":o.addClass("block-opt-refresh");break;case"state_normal":o.removeClass("block-opt-refresh");break;case"close":o.hide();break;case"open":o.show();break;default:return!1}}}}}}),e.controller("AppCtrl",["$scope","$localStorage","$rootScope","$stateParams","$window","$transitions",function(e,t,a,r,o,n){e.isNavCollapsed=!0,e.isCollapsed=!1,e.isCollapsedHorizontal=!1,n.onSuccess({},()=>{document.documentElement.scrollTop=0,window.setTimeout(function(){document.documentElement.scrollTop=0},10)}),e.webapp={version:"3.1",localStorage:!1,settings:{headerFixed:!0}},e.webapp.localStorage&&(e.webapp.localStorage&&(angular.isDefined(t.webappSettings)?e.webapp.settings=t.webappSettings:t.webappSettings=e.webapp.settings),e.$watch("webapp.settings",function(){t.webappSettings=e.webapp.settings},!0)),e.$on("$viewContentLoaded",function(){e.helpers.uiLoader("hide"),e.helpers.uiHandleMain()})}]),e.run(function(e,t){var a;e.helpers=t,jQuery(window).on("resize orientationchange",function(){clearTimeout(a),a=setTimeout(function(){e.helpers.uiHandleMain()},150)})})}(),function(){"use strict";angular.module("app").constant("AuthEvents",{loginSuccess:"event:auth-login-success",loginFailed:"event:auth-login-falied",loginRequired:"event:auth-login-required",tokenExpired:"event:auth-token-expired",loginUnverified:"event:auth-unverified"})}(),function(){"use strict";function e(e,t,a,r,o,n){let i={emailVerified:!1,phoneVerified:!1},l=!1,c="",s="";const d="https://taskeasy-server.herokuapp.com";return{login:function(o){let s=t.post(d+"/login",o);return s.then(t=>{l=!0,r.access_token=t.data.access_token,r.refresh_token=t.data.refresh_token,e.$broadcast(a.loginSuccess),i.phoneVerified=!0,i.emailVerified=!0}).catch(t=>{i.username=o.username,c=o.password,t.data.msg&&(-1!=t.data.msg.indexOf("Phone")?(i.emailVerified=!0,i.email=t.data.email,i.phone=t.data.phone,l=!0,n.go("verify-phone")):-1!=t.data.msg.indexOf("Email")&&(i.email=t.data.email,i.phone=t.data.phone,l=!0,n.go("verify-email")),e.$broadcast(a.loginUnverified)),e.$broadcast(a.loginFailed)}),s},getGithubCode:function(){window.open("https://github.com/login/oauth/authorize?client_id=f59b28f894d50689eea0&amp;redirect_uri=http://localhost:8000/#!/login&amp;state=asdfgh&amp;allow_signup=false")},loginWithGithub:function(o){return s=o,t.post(d+"/login/github/get_code/"+o).then(o=>{console.log(o),o.data.error||t.get(d+"/login/github/"+o.data.access_token).then(t=>{l=!0,r.access_token=o.data.access_token,r.refresh_token=o.data.refresh_token,e.$broadcast(a.loginSuccess),i.phoneVerified=!0,i.emailVerified=!0})})},register:function(e){let a=t.post(d+"/register",e);return a.then(t=>{t.data&&t.data.msg&&-1==t.data.msg.indexOf("error")&&this.login({username:e.username,password:e.password}).then(e=>{n.go("home")})}),a},sendVerificationEmail:function(){return t.get(d+"/send_email/"+i.email)},verifyEmail:function(e){let a=t.get(d+"/email_confirm/"+e);return a.then(e=>{i.emailVerified=!0,n.go("verify-phone")}),a},verifyPhone:function(){let e=t.get(d+"/phone_confirm/"+i.phone);return e.then(e=>{this.login({username:i.username,password:c}).then(e=>{n.go("home")})}),e},checkPreviousLogin:function(){let e=r.access_token&&r.refresh_token&&!this.isTokenExpired();return l=e,e&&(i.emailVerified=!0,i.phoneVerified=!0),e},checkUniqueUsername:function(e){return t.get(d+"/check_username/"+e)},isLoggedIn:function(){return l},getUserDetails:function(){return JSON.parse(JSON.stringify(i))},isTokenExpired:function(){return!r.access_token||!o.decodeToken(r.access_token).fresh},isUserVerified:function(){return l&&!!i.phoneVerified&&!!i.emailVerified},getRedirectStage:function(){return l?i.emailVerified?i.emailVerified?void 0:"verify-phone":"verify-email":"login"},getAccessToken:function(){return r.access_token},logout:function(){t.defaults.headers.common.Authorization="Bearer "+this.getAccessToken();let e=t.post(d+"/logout");return e.then(e=>{r.$reset(),l=!1,i.emailVerified=!1,i.phoneVerified=!1,i.username="",i.email="",i.phone="",i.password="",n.go("login")}),e}}}angular.module("app").factory("Auth",e),e.$inject=["$rootScope","$http","AuthEvents","$localStorage","jwtHelper","$state"]}(),function(){"use strict";angular.element(document).ready(()=>{function e(e,t,a){t.checkPreviousLogin(),e.Auth=t,a.onBefore({},e=>t.isUserVerified()&&e.to().data&&e.to().data.unAuth?e.router.stateService.target("home"):t.isUserVerified()||e.to().data&&e.to().data.unAuth?t.isLoggedIn()||"login"==e.to().name||"register"==e.to().name?"verify-email"==e.to().name&&t.getUserDetails().emailVerified?e.router.stateService.target("verify-phone"):"verify-phone"==e.to().name&&t.getUserDetails().phoneVerified?e.router.stateService.target("home"):void 0:e.router.stateService.target("login"):e.router.stateService.target(t.getRedirectStage())),a.onSuccess({to:"login"},e=>{let a=/(?<=code=)[\w]+/g.exec(window.location);a&&a.length&&(console.log(a[0]),t.loginWithGithub(a[0]))})}angular.module("app").run(e),e.$inject=["$rootScope","Auth","$transitions"],angular.bootstrap(document,["app"]),document.documentElement.scrollTop=0})}(),function(){"use strict";function e(e,t){return{call:function(a,r,o){return e.defaults.headers.common.Authorization="Bearer "+t.Auth.getAccessToken(),e({method:a,url:"https://taskeasy-server.herokuapp.com/cards/all"+r,params:"GET"==a?o:{},data:"GET"!=a?o:{}})}}}angular.module("app").service("baseAPIService",e),e.$inject=["$http","$rootScope"]}(),function(){"use strict";function e(e){return{getAllGroups:function(){return e.call("GET","/cards/all",{})},deleteGroup:function(t){return e.call("DELETE","/groups/"+t,{})}}}angular.module("app").service("cardGroupService",e),e.$inject=["baseAPIService"]}(),function(){"use strict";function e(e){return{getCardById:function(t){return e.call("GET","/cards/"+t,{})},deleteCardById:function(t){return e.call("DELETE","/cards/"+t,{})},editCardById:function(t,a){let r=JSON.parse(JSON.stringify(a));return delete r._id,delete r.type,e.call("PUT","/cards/"+t,r)},inputCard:function(t){return e.call("POST","/cards",t)}}}angular.module("app").service("cardService",e),e.$inject=["baseAPIService"]}(),function(){"use strict";function e(e){return{diaryEntry:function(t){return e.call("POST","/diary",t)},getDiaryById:function(t){return e.call("GET","/diary/"+t,{})},editDiaryById:function(t,a){return e.call("PUT","/diary/"+t,a)},getAllDiaryEntries:function(){return e.call("GET","/diary/all")}}}angular.module("app").service("diaryService",e),e.$inject=["baseAPIService"]}(),function(){"use strict";function e(e){return{getStock:function(){return e.call("GET","/stock",{})},checkRefill:function(){return e.call("POST","/refill",{})}}}angular.module("app").service("productService",e),e.$inject=["baseAPIService"]}(),function(){"use strict";function e(e,t,a){let r=this;r.cardOptions=e.cardOptions,r.cardData=e.cardData,r.groupInfo=e.groupData,r.expand=function(){t.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/modules/client/cards/expanded/card-base.expanded.html",size:"md modal-dialog-centered",controller:"cardExpandedController",controllerAs:"cardExpandedController",resolve:{options:()=>r.cardOptions,data:()=>r.cardData,group:()=>r.groupInfo}}).result.then(e=>{r.cardOptions.onChange&&r.cardOptions.onChange(e)}).catch(e=>{})},r.contextMenuOptions=[{text:"Edit",click:function(){r.expand()}},{text:"Share",click:function(){if(r.cardOptions.getShareData){let e=r.cardOptions.getShareData();if(!e.title||!e.text)throw error("Cannot share the given object");navigator.share?navigator.share(e):window.open(`mailto:john@doe,com?subject=${e.title}&amp;body=${e.text}`)}}},{text:"Delete",click:function(e,t){angular.element(t.delegateTarget).remove(),a.deleteCardById(r.cardData._id.$oid)}}]}angular.module("app").controller("cardBaseController",e),e.$inject=["$scope","$uibModal","cardService"]}(),function(){"use strict";function e(e,t,a,r,o){let n=this;n.options=a,n.data=JSON.parse(JSON.stringify(r)),n.group=o,n.editingTitle=!1,n.getChanged=function(){let e={};return Object.keys(r).forEach(t=>{JSON.stringify(r[t])!==JSON.stringify(n.data[t])&&(e[t]=n.data[t])}),e},n.toggleTitleEdit=function(){n.editingTitle=!n.editingTitle,n.editingTitle&&t(()=>{angular.element("#modal-name-input").trigger("focus")})},n.save=function(){e.close(n.getChanged())},n.close=function(){e.dismiss()}}angular.module("app").controller("cardExpandedController",e),e.$inject=["$uibModalInstance","$timeout","options","data","group"]}(),function(){"use strict";function e(e,t,a){let r=this;r.data=t.groupData,r.groupInfo={name:r.data.name},r.contextMenuOptions=[{text:"Delete",click:function(e,t){cardGroupsService.deleteGroup(r.data.name),angular.element(t.delegateTarget).remove()}}],r.addCard=function(e){let t={name:"Card "+(r.data.cards.length+1),type:e,category:e,group:r.data.name};switch(e){case"Text":t.text="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.";break;case"Reminder":t.reminderList=[];break;case"To-do list":t.list=[];break;case"Meeting":t.meeting={date:Date.now(),time:Date.now(),link:"https://asd.com/qwe-123-asd",documents:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."};break;case"Grocery stock":t.inventory=[];break;case"Grocery refill":t.refill=[],t.refillFreq=[],t.startDate=new Date,t.cardid=[]}r.data.cards.push(t),a.inputCard(t)},t.$watch(function(){return r.data.name},function(e){r.groupInfo.name=e})}angular.module("app").controller("cardGroupController",e),e.$inject=["$rootScope","$scope","cardService"]}(),function(){"use strict";function e(e,t){let a=this;a.options={expandedSrc:"app/modules/client/cards/expanded/card-meeting.expanded.html",onChange:e=>{Object.keys(e).forEach(t=>{a.data[t]=e[t]}),t.editCardById(a.data._id.$oid,a.data)},getShareData:()=>({title:a.data.name,text:"User has decided to share meeting on "+a.data.meeting.date+" at "+a.data.meeting.time+".\n The url for the meeting is "+a.data.meeting.link+".\n Additional details: "+a.data.meeting.documents})},a.data=e.data,a.groupInfo=e.groupInfo}angular.module("app").controller("cardMeetingController",e),e.$inject=["$scope","cardService"]}(),function(){"use strict";function e(e){let t=this;t.meeting=e.cardExpandedController.data.meeting,t.datePopup={addDate:!1},t.toggleDatePopup=function(e){t.datePopup[e]=!t.datePopup[e]}}angular.module("app").controller("cardMeetingExpandedController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t){let a=this;a.options={expandedSrc:"app/modules/client/cards/expanded/card-refill.expanded.html",onChange:e=>{Object.keys(e).forEach(t=>{a.data[t]=e[t]}),t.editCardById(a.data._id.$oid,a.data)},getShareData:()=>{return a.data.refill.forEach(function(e){"".concat("Item - "+e.item+"Quantity - "+e.quantity+"\n")}),{title:a.data.name,text:"User has shared the scheduled refill of these items into the inventory: \nStarting from "+a.data.startDate+"\nWith frequency set as: "+a.data.refillFreq}}},a.data=e.data,a.groupInfo=e.groupInfo}angular.module("app").controller("cardRefillController",e),e.$inject=["$scope","cardService"]}(),function(){"use strict";function e(e){let t=this;t.data=e.cardExpandedController.data,t.refill=e.cardExpandedController.data.refill,t.refillFreq=e.cardExpandedController.data.refillFreq,t.startDate=e.cardExpandedController.data.startDate,t.datePopup={addDate:!1},t.groceriesList=[{id:1,label:"Milk"},{id:2,label:"Eggs"},{id:3,label:"Rice"},{id:4,label:"Water"},{id:5,label:"Curd"}],t.selectedModel=[],t.searchSettings={enableSearch:!0,showCheckAll:!1,showUncheckAll:!1,dynamicTitle:!1,styleActive:!0,buttonClasses:"btn-outline-light btn-transparent btn-transparent-light px-0"},t.selectTexts={buttonDefaultText:"Add/Remove items to card"},t.freqSettings={enableSearch:!1,showCheckAll:!1,showUncheckAll:!1,dynamicTitle:!0,styleActive:!0,buttonClasses:"btn-outline-light btn-transparent btn-transparent-light px-0",selectionLimit:1,smartButtonMaxItems:1},t.frequencies=[{id:"1",label:"Once"},{id:"2",label:"Daily"},{id:"3",label:"Weekly"},{id:"4",label:"Monthly"}],t.stockCards=[{id:"1",label:"Stock 1"},{id:"2",label:"Stock 2"}],t.addToRefiller=function(){angular.forEach(t.selectedModel,function(e){t.refill.push({item:e.label,quantity:1}),t.selectedModel=[]})},t.remove=function(e){t.data.refill.splice(t.data.refill.indexOf(e),1)},t.toggleDatePopup=function(e){t.datePopup[e]=!t.datePopup[e]}}angular.module("app").controller("cardRefillExpandedController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t){let a=this;a.options={expandedSrc:"app/modules/client/cards/expanded/card-reminder.expanded.html",onChange:e=>{Object.keys(e).forEach(t=>{a.data[t]=e[t]}),t.editCardById(a.data._id.$oid,a.data)},getShareData:()=>{return a.data.reminderList.forEach(function(e){"".concat("Date - "+e.date+" Time - "+e.time+"\n")}),{title:a.data.name,text:"User has shared these reminder details with you: \n"}}},a.data=e.data,a.groupInfo=e.groupInfo}angular.module("app").controller("cardReminderController",e),e.$inject=["$scope","cardService"]}(),function(){"use strict";function e(e){let t=this;t.reminderList=e.cardExpandedController.data.reminderList,t.date=Date.now(),t.time=Date.now(),t.datePopup={addDate:!1},t.addReminder=function(){t.reminderList.push({date:t.date,time:t.time,remove:!1}),t.date=Date.now(),t.time=Date.now()},t.removeReminder=function(e){let a=t.reminderList;e.remove=!0,t.reminderList=[],angular.forEach(a,function(e){e.remove||t.reminderList.push(e)})},t.removeAll=function(){t.reminderList=[]},t.toggleDatePopup=function(e){t.datePopup[e]=!t.datePopup[e]}}angular.module("app").controller("cardReminderExpandedController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t){let a=this;a.options={expandedSrc:"app/modules/client/cards/expanded/card-stock.expanded.html",onChange:e=>{Object.keys(e).forEach(t=>{a.data[t]=e[t]}),t.editCardById(a.data._id.$oid,a.data)},getShareData:()=>{return a.data.inventory.forEach(function(e){e.item,e.quantity}),{title:a.data.name,text:"User has shared the following inventory details: \n"}}},a.data=e.data,a.groupInfo=e.groupInfo}angular.module("app").controller("cardStockController",e),e.$inject=["$scope","cardService"]}(),function(){"use strict";function e(e,t){let a=this;a.inventory=e.cardExpandedController.data.inventory,a.groceriesList=t.getStock(),a.selectedModel=[],a.searchSettings={enableSearch:!0,showCheckAll:!1,showUncheckAll:!1,dynamicTitle:!1,styleActive:!0,buttonClasses:"btn-outline-light btn-transparent btn-transparent-light px-0"},a.selectTexts={buttonDefaultText:"Add/Remove items to card"},a.addToInventory=function(){angular.forEach(a.selectedModel,function(e){a.inventory.push({item:e.label,quantity:1}),a.selectedModel=[]})},a.remove=function(e){a.inventory.splice(a.inventory.indexOf(e),1)}}angular.module("app").controller("cardStockExpandedController",e),e.$inject=["$scope","productService"]}(),function(){"use strict";function e(e,t){let a=this;a.options={expandedSrc:"app/modules/client/cards/expanded/card-text.expanded.html",onChange:e=>{Object.keys(e).forEach(t=>{a.data[t]=e[t]}),console.log(a.data);let r=t.editCardById(a.data._id.$oid,a.data);console.log(r),r.then(e=>{console.log(e)}).catch(e=>{console.log(e)})},getShareData:()=>({title:a.data.name,text:"User has shared this text with you: "+a.data.text})},a.data=e.data,a.groupInfo=e.groupInfo}angular.module("app").controller("cardTextController",e),e.$inject=["$scope","cardService"]}(),function(){"use strict";function e(e){this.data=e.cardExpandedController.data}angular.module("app").controller("cardTextExpandedController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){let t=this;t.todoList=e.cardExpandedController.data.list,t.task="",t.todoAdd=function(){t.todoList.push({todoText:t.task,done:!1}),t.task=""},t.remove=function(){t.todoList=t.todoList.filter(e=>!e.done)},t.removeAll=function(){t.todoList=[]},t.completedTasksPresent=function(){return t.todoList.filter(e=>e.done).length>0}}angular.module("app").controller("cardToDoListExpandedController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t){let a=this;a.options={expandedSrc:"app/modules/client/cards/expanded/card-to-do-list.expanded.html",onChange:e=>{Object.keys(e).forEach(t=>{a.data[t]=e[t]}),t.editCardById(a.data._id.$oid,a.data)},getShareData:()=>{let e="";return e=a.data.list.map(e=>e.todoText).join("\n"),console.log(e),{title:a.data.name,text:"User wants to share the following tasks: \n"+e}}},a.data=e.data,a.groupInfo=e.groupInfo}angular.module("app").controller("cardToDoListController",e),e.$inject=["$scope","cardService"]}(),function(){"use strict";function e(e){let t=this;t.options={expandedSrc:"app/modules/client/cards/expanded/card-weather.expanded.html",onChange:e=>{Object.keys(e).forEach(a=>{t.data[a]=e[a]})},getShareData:()=>({title:t.data.name,text:"User has shared this text with you: "+t.data.text})},t.data=e.data,t.groupInfo=e.groupInfo}angular.module("app").controller("cardWeatherController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t){let a=this;a.weather=e.cardExpandedController.data.weather,a.city="",a.requestWeatherByCity=function(e){return t({method:"GET",url:"http://api.openweathermap.org/data/2.5/weather?",params:{q:e,mode:"json",units:"metric",cnt:"7",appid:"0473360f7aa183422a005a2374480706"}})},a.getWeather=function(e){a.requestWeatherByCity(e).then(function(e){a.weather=e,a.weather.city=e.data.name,a.weather.temp="Temperature: "+e.data.main.temp+" 째C",a.weather.feelsLike="Feels Like: "+e.data.main.feels_like+" 째C",a.weather.maxAndMin="Max: "+e.data.main.temp_max+" 째C | Min: "+e.data.main.temp_min+" 째C",a.weather.description=e.data.weather[0].description,a.weather.icon=`https://openweathermap.org/img/wn/${e.data.weather[0].icon}@2x.png`,console.log(e.data)}),a.city=""}}angular.module("app").controller("cardWeatherExpandedController",e),e.$inject=["$scope","$http"]}(),function(){"use strict";function e(e){let t=this;t.calendarOptions={calendarView:"month",viewDate:moment(),viewTitle:"Your Diary",events:[],selectedDate:new Date},t.dummy="Your diary entry",t.original=[{date:new Date(moment().hour(0).minutes(0).seconds(0).milliseconds(0)),heading:"Lorem",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},{date:new Date(moment().hour(0).minutes(0).seconds(0).milliseconds(0).subtract(1,"day")),heading:"Ipsum dolor",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}],t.data=JSON.parse(JSON.stringify(t.original)),t.getCurrentDate=function(){return new Date(t.calendarOptions.viewDate)},t.changeDate=function(e){t.calendarOptions.selectedDate=e},t.findDateIndex=function(e,t){for(let a=0;a<e.length;a++)if(0==moment.duration(moment(e[a]).diff(moment(t))).days())return a;return-1},t.getDiaryInfo=function(){let e=t.findDateIndex(t.data.map(e=>e.date),t.calendarOptions.selectedDate);return-1!=e?e:(t.data.push({date:new Date(t.calendarOptions.selectedDate),heading:moment(t.calendarOptions.selectedDate).format("MMMM Do"),text:"Your diary entry"}),t.data.length-1)},e.onBefore({from:"diary"},e=>{for(let e=0;e<t.data.length;e++){-1==t.findDateIndex(t.original.map(e=>e.date),t.data[e].date)?console.log(`Data added for ${t.data[e].date}`):JSON.stringify(t.data[e])!=JSON.stringify(t.original[e])&&console.log(`Data changed for ${t.data[e].date}`)}})}angular.module("app").controller("diaryController",e),e.$inject=["$transitions"]}(),function(){"use strict";function e(e,t,a,r,o){e.$on("$includeContentLoaded",function(){t.helpers.uiHandleHeader()});let n=this;n.toggleSidebar=function(){t.helpers.uiHandleSidebar()},n.hideExtra=!0,n.logout=function(){t.Auth.logout()},o.onBefore({},e=>{e.to().data&&e.to().data.unAuth?n.hideExtra=!0:n.hideExtra=!1}),o.onSuccess({},e=>{e.to().data&&e.to().data.unAuth?n.hideExtra=!0:n.hideExtra=!1})}angular.module("app").controller("headerController",e),e.$inject=["$scope","$rootScope","$state","$stateParams","$transitions"]}(),function(){"use strict";function e(e,t){let a=this;a.cardGroups={},t.getAllGroups().then(e=>{if(0!=Object.keys(e.data)){console.log(e.data);let t=[...new Set(e.data.map(e=>e.group))];t=t.map(t=>({name:t,cards:e.data.filter(e=>e.group==t)})),a.cardGroups=t}else a.cardGroups=new Array}),a.addGroup=function(){a.cardGroups.push({name:`Cards ${a.cardGroups.length+1}`,cards:[]})}}angular.module("app").controller("homeController",e),e.$inject=["$rootScope","cardGroupService"]}(),function(){"use strict";function e(e,t){let a=this;a.loginForm={},a.loginFailed=!1,a.submit=function(r){r&&e.Auth.login(a.loginForm).then(e=>{t.go("home")}).catch(e=>{a.loginFailed=!0})},a.loginGithub=function(){e.Auth.getGithubCode()}}angular.module("app").controller("loginController",e),e.$inject=["$rootScope","$state"]}(),function(){"use strict";function e(e,t){let a=this;a.otp="",a.verifyFailed=!1,a.otpsent=!1,a.otpOptions={size:6,type:"text",onDone:e=>{},onChange:e=>{a.otp=""+e}},a.confirm,a.sendOTP=function(){firebase.auth().signInWithPhoneNumber(e.Auth.getUserDetails().phone,new firebase.auth.RecaptchaVerifier("send-otp",{size:"invisible"})).then(e=>{a.confirm=e,t(()=>{a.otpsent=!0})})},a.phone=e.Auth.getUserDetails().phone,a.verify=function(){a.confirm.confirm(a.otp).then(t=>{e.Auth.verifyPhone()}).catch(e=>{a.verifyFailed=!0})}}angular.module("app").controller("phoneVerifyController",e),e.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function e(e,t){let a=this;a.registerForm={username:"",occupation:"Student"},a.dropdownstatus={isopen:!1},a.occupations=["Student","Job-Seeker","Employed","Home-Maker"],a.checkPasswordMatch=function(e){a.registerForm.password==a.registerForm.passwordrepeat?e.passwordrepeat.$setValidity("mismatch",!0):e.passwordrepeat.$setValidity("mismatch",!1)},a.checkUniqueUsername=function(t){e.Auth.checkUniqueUsername(a.registerForm.username).then(e=>{t.username.$setValidity("unique",!1),console.log(e)}).catch(e=>{t.username.$setValidity("unique",!0)})},a.toggleDropdown=function(){a.dropdownstatus.isopen=!a.dropdownstatus.isopen},a.removeUniqueValidation=function(e,t){e[t].$setValidity("unique",!0)},a.submit=function(t,r){r&&e.Auth.register({username:a.registerForm.username,password:a.registerForm.password,email:a.registerForm.email,phone:a.registerForm.phone.split(" ").join(""),profession:a.registerForm.occupation}).then(e=>{-1!=e.data.msg.indexOf("error")&&-1!=e.data.msg.indexOf("E1100")&&t[e.data.msg.match("keyValue': {'([a-z]*)'")[1]].$setValidity("unique",!1)}).catch(e=>{console.log("regerr",e)})}}angular.module("app").controller("registerController",e),e.$inject=["$rootScope","$scope"]}(),function(){"use strict";function e(e){this.email=e.Auth.getUserDetails().email,e.Auth.sendVerificationEmail()}angular.module("app").controller("verifyEmailController",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e,t){let a=this;a.verifyFailed=!1,e.Auth.verifyEmail(t.params.code).then(e=>{}).catch(e=>{a.verifyFailed=!0})}angular.module("app").controller("verifyingEmailController",e),e.$inject=["$rootScope","$state"]}(),function(){"use strict";function e(e,t){return{restrict:"E",templateUrl:"app/modules/footer/app-footer.html",replace:!0}}angular.module("app").directive("appFooter",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t,a){return{restrict:"E",templateUrl:"app/modules/header/app-header.html",controller:"headerController",controllerAs:"headerController",replace:!0}}angular.module("app").directive("appHeader",e),e.$inject=["$rootScope","$compile","$transitions"]}(),function(){"use strict";function e(e,t){return{restrict:"E",templateUrl:"app/modules/sidebar/app-sidebar.html",replace:!0}}angular.module("app").directive("appSidebar",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{cardOptions:"=options",cardData:"=data",groupData:"=group"},templateUrl:"app/modules/client/cards/normal/card-base.html",controller:"cardBaseController",controllerAs:"cardBaseController",replace:!0}}angular.module("app").directive("cardBase",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{groupData:"=data"},templateUrl:"app/modules/client/cards/card-group.html",controller:"cardGroupController",controllerAs:"cardGroupController",replace:!0}}angular.module("app").directive("cardGroup",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-meeting.html",controller:"cardMeetingController",controllerAs:"cardMeetingController",replace:!0}}angular.module("app").directive("cardMeeting",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-refill.html",controller:"cardRefillController",controllerAs:"cardRefillController",replace:!0}}angular.module("app").directive("cardRefill",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-reminder.html",controller:"cardReminderController",controllerAs:"cardReminderController",replace:!0}}angular.module("app").directive("cardReminder",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-stock.html",controller:"cardStockController",controllerAs:"cardStockController",replace:!0}}angular.module("app").directive("cardStock",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-text.html",controller:"cardTextController",controllerAs:"cardTextController",replace:!0}}angular.module("app").directive("cardText",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-to-do-list.html",controller:"cardToDoListController",controllerAs:"cardToDoListController",replace:!0}}angular.module("app").directive("cardToDoList",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-weather.html",controller:"cardWeatherController",controllerAs:"cardWeatherController",replace:!0}}angular.module("app").directive("cardWeather",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e){return{restrict:"A",require:"?ngModel",link:function(t,a,r,o){function n(){let e=a.text();r.stripBr&&"<br>"==e&&(e=""),o.$setViewValue(e)}o&&r.contenteditable&&(o.$render=function(){a.html(e.getTrustedHtml(o.$viewValue||""))},a.on("keyup change",function(){t.$evalAsync(n)}),a.on("click",function(){a.attr("contenteditable","true")}),a.on("blur",function(){a.attr("contenteditable","false")}))}}}angular.module("app").directive("ngContenteditable",e),e.$inject=["$sce"]}(),function(){"use strict";function e(){return{restrict:"A",replace:!1,link:function(e,t,a){angular.element(t).inputSpinner()}}}angular.module("app").directive("ngNumberInput",e),e.$inject=["$rootScope","$compile"]}();