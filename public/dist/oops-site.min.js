/*! oops-site 2020-11-28 */

!function(){"use strict";var e=angular.module("app",["ngStorage","ui.router","ngResource","ui.bootstrap","oc.lazyLoad","ngSanitize","ngAnimate","ngMessages","ngFileUpload","ui.bootstrap.contextMenu","angular-jwt","otpInputDirective","angularjs-dropdown-multiselect","dndLists","mwl.calendar"]);function t(e,t,r,a,o){t.otherwise("home"),e.state("home",{url:"/home",templateUrl:"app/modules/client/home.html",controller:"homeController",controllerAs:"homeController"}).state("verify-phone",{url:"/verify-phone",templateUrl:"app/modules/client/verify-phone.html",controller:"phoneVerifyController",controllerAs:"phoneVerifyController",data:{unAuth:!0}}).state("login",{url:"/login",templateUrl:"app/modules/client/login.html",controller:"loginController",controllerAs:"loginController",data:{unAuth:!0}}).state("register",{url:"/register",templateUrl:"app/modules/client/register.html",controller:"registerController",controllerAs:"registerController",data:{unAuth:!0}}).state("verify-email",{url:"/verify-email",templateUrl:"app/modules/client/verify-email.html",controller:"verifyEmailController",controllerAs:"verifyEmailController",data:{unAuth:!0}}).state("verifying-email",{url:"/verifying-email/{code}",templateUrl:"app/modules/client/verifying-email.html",controller:"verifyingEmailController",controllerAs:"verifyingEmailController",data:{unAuth:!0}}).state("diary",{url:"/diary",templateUrl:"app/modules/client/diary.html",controller:"diaryController",controllerAs:"diaryController"})}e.config(t),t.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","$provide","$localStorageProvider"],e.factory("uiHelpers",function(){return{uiHandleMain:function(){var e=jQuery("#content-container"),t=jQuery(window).height(),r=jQuery("#header-navbar").outerHeight(),a=jQuery("#page-footer").outerHeight();jQuery("#page-container").hasClass("header-navbar-fixed")?e.css("min-height",t-a):e.css("min-height",t-(r+a))},uiHandleHeader:function(){var e=jQuery("#page-container");e.hasClass("header-navbar-fixed")&&e.hasClass("header-navbar-transparent")&&jQuery(window).on("scroll",function(){jQuery(this).scrollTop()>20?e.addClass("header-navbar-scroll"):e.removeClass("header-navbar-scroll")})},uiHandleSidebar:function(){var e=jQuery("#nav-sidebar");"true"==e.attr("show")?e.attr("show","false"):e.attr("show","true")},uiLoader:function(e){var t=jQuery("body"),r=jQuery("#page-loader");"show"===e?r.length?r.fadeIn(250):t.prepend('<div id="page-loader"></div>'):"hide"===e&&r.length&&r.fadeOut(250)},uiBlocks:function(e,t,r){var a="si si-size-fullscreen";if("init"===t)switch(r.data("action")){case"fullscreen_toggle":r.html('<i class="'+(r.closest(".block").hasClass("block-opt-fullscreen")?"si si-size-actual":a)+'"></i>');break;case"content_toggle":r.html('<i class="'+(r.closest(".block").hasClass("block-opt-hidden")?"icon-arrow-down32":"icon-arrow-up32")+'"></i>');break;default:return!1}else{var o=e instanceof jQuery?e:jQuery(e);if(o.length){var n=jQuery('[data-js-block-option][data-action="fullscreen_toggle"]',o),i=jQuery('[data-js-block-option][data-action="content_toggle"]',o);switch(t){case"fullscreen_toggle":o.toggleClass("block-opt-fullscreen"),o.hasClass("block-opt-fullscreen")?jQuery(o).scrollLock("enable"):jQuery(o).scrollLock("disable"),n.length&&(o.hasClass("block-opt-fullscreen")?jQuery("i",n).removeClass(a).addClass("si si-size-actual"):jQuery("i",n).removeClass("si si-size-actual").addClass(a));break;case"fullscreen_on":o.addClass("block-opt-fullscreen"),jQuery(o).scrollLock("enable"),n.length&&jQuery("i",n).removeClass(a).addClass("si si-size-actual");break;case"fullscreen_off":o.removeClass("block-opt-fullscreen"),jQuery(o).scrollLock("disable"),n.length&&jQuery("i",n).removeClass("si si-size-actual").addClass(a);break;case"content_toggle":o.toggleClass("block-opt-hidden"),i.length&&(o.hasClass("block-opt-hidden")?jQuery("i",i).removeClass("icon-arrow-up32").addClass("icon-arrow-down32"):jQuery("i",i).removeClass("icon-arrow-down32").addClass("icon-arrow-up32"));break;case"content_hide":o.addClass("block-opt-hidden"),i.length&&jQuery("i",i).removeClass("icon-arrow-up32").addClass("icon-arrow-down32");break;case"content_show":o.removeClass("block-opt-hidden"),i.length&&jQuery("i",i).removeClass("icon-arrow-down32").addClass("icon-arrow-up32");break;case"refresh_toggle":o.toggleClass("block-opt-refresh"),jQuery('[data-js-block-option][data-action="refresh_toggle"][data-action-mode="demo"]',o).length&&setTimeout(function(){o.removeClass("block-opt-refresh")},2e3);break;case"state_loading":o.addClass("block-opt-refresh");break;case"state_normal":o.removeClass("block-opt-refresh");break;case"close":o.hide();break;case"open":o.show();break;default:return!1}}}}}}),e.controller("AppCtrl",["$scope","$localStorage","$rootScope","$stateParams","$window","$transitions",function(e,t,r,a,o,n){e.isNavCollapsed=!0,e.isCollapsed=!1,e.isCollapsedHorizontal=!1,n.onSuccess({},()=>{document.documentElement.scrollTop=0,window.setTimeout(function(){document.documentElement.scrollTop=0},10)}),e.webapp={version:"3.1",localStorage:!1,settings:{headerFixed:!0}},e.webapp.localStorage&&(e.webapp.localStorage&&(angular.isDefined(t.webappSettings)?e.webapp.settings=t.webappSettings:t.webappSettings=e.webapp.settings),e.$watch("webapp.settings",function(){t.webappSettings=e.webapp.settings},!0)),e.$on("$viewContentLoaded",function(){e.helpers.uiLoader("hide"),e.helpers.uiHandleMain()})}]),e.run(function(e,t){var r;e.helpers=t,jQuery(window).on("resize orientationchange",function(){clearTimeout(r),r=setTimeout(function(){e.helpers.uiHandleMain()},150)})})}(),function(){"use strict";angular.module("app").constant("AuthEvents",{loginSuccess:"event:auth-login-success",loginFailed:"event:auth-login-falied",loginRequired:"event:auth-login-required",tokenExpired:"event:auth-token-expired",loginUnverified:"event:auth-unverified"})}(),function(){"use strict";function e(e,t,r,a,o,n){let i={emailVerified:!1,phoneVerified:!1},l=!1,c="";const s="http://localhost:5000";return{login:function(o){let d=t.post(s+"/login",o);return d.then(t=>{l=!0,a.access_token=t.data.access_token,a.refresh_token=t.data.refresh_token,e.$broadcast(r.loginSuccess),i.phoneVerified=!0,i.emailVerified=!0}).catch(t=>{i.username=o.username,c=o.password,t.data.msg&&(-1!=t.data.msg.indexOf("Phone")?(i.emailVerified=!0,i.email=t.data.email,i.phone=t.data.phone,l=!0,n.go("verify-phone")):-1!=t.data.msg.indexOf("Email")&&(i.email=t.data.email,i.phone=t.data.phone,l=!0,n.go("verify-email")),e.$broadcast(r.loginUnverified)),e.$broadcast(r.loginFailed)}),d},register:function(e){let r=t.post(s+"/register",e);return r.then(t=>{t.data&&t.data.msg&&-1==t.data.msg.indexOf("error")&&this.login({username:e.username,password:e.password}).then(e=>{n.go("home")})}),r},sendVerificationEmail:function(){return t.get(s+"/send_email/"+i.email)},verifyEmail:function(e){let r=t.get(s+"/email_confirm/"+e);return r.then(e=>{i.emailVerified=!0,n.go("verify-phone")}),r},verifyPhone:function(){let e=t.get(s+"/phone_confirm/"+i.phone);return e.then(e=>{this.login({username:i.username,password:c}).then(e=>{n.go("home")})}),e},checkPreviousLogin:function(){let e=a.access_token&&a.refresh_token&&!this.isTokenExpired();return l=e,e&&(i.emailVerified=!0,i.phoneVerified=!0),e},checkUniqueUsername:function(e){return t.get(s+"/check_username/"+e)},isLoggedIn:function(){return l},getUserDetails:function(){return JSON.parse(JSON.stringify(i))},isTokenExpired:function(){return!a.access_token||!o.decodeToken(a.access_token).fresh},isUserVerified:function(){return l&&!!i.phoneVerified&&!!i.emailVerified},getRedirectStage:function(){return l?i.emailVerified?i.emailVerified?void 0:"verify-phone":"verify-email":"login"},getAccessToken:function(){return a.access_token},logout:function(){t.defaults.headers.common.Authorization="Bearer "+this.getAccessToken();let e=t.post(s+"/logout");return e.then(e=>{a.$reset(),l=!1,i.emailVerified=!1,i.phoneVerified=!1,i.username="",i.email="",i.phone="",i.password="",n.go("login")}),e}}}angular.module("app").factory("Auth",e),e.$inject=["$rootScope","$http","AuthEvents","$localStorage","jwtHelper","$state"]}(),function(){"use strict";angular.element(document).ready(()=>{function e(e,t,r){t.checkPreviousLogin(),e.Auth=t,r.onBefore({},e=>t.isUserVerified()&&e.to().data&&e.to().data.unAuth?e.router.stateService.target("home"):t.isUserVerified()||e.to().data&&e.to().data.unAuth?t.isLoggedIn()||"login"==e.to().name||"register"==e.to().name?"verify-email"==e.to().name&&t.getUserDetails().emailVerified?e.router.stateService.target("verify-phone"):"verify-phone"==e.to().name&&t.getUserDetails().phoneVerified?e.router.stateService.target("home"):void 0:e.router.stateService.target("login"):e.router.stateService.target(t.getRedirectStage()))}angular.module("app").run(e),e.$inject=["$rootScope","Auth","$transitions"],angular.bootstrap(document,["app"]),document.documentElement.scrollTop=0})}(),function(){"use strict";function e(e,t){return{call:function(r,a,o){return e.defaults.headers.common.Authorization="Bearer "+t.Auth.getAccessToken(),e.defaults.headers.common["Content-type"]="application/json",e({method:r,url:"http://localhost:5000"+a,params:"GET"==r?o:{},data:"GET"!=r?o:{}})}}}angular.module("app").service("baseAPIService",e),e.$inject=["$http","$rootScope"]}(),function(){"use strict";function e(e){return{getAllGroups:function(){return e.call("GET","/cards/all",{})},deleteGroup:function(t){return e.call("DELETE","/groups/"+t,{})}}}angular.module("app").service("cardGroupService",e),e.$inject=["baseAPIService"]}(),function(){"use strict";function e(e){return{getCardById:function(t){return e.call("GET","/cards/"+t,{})},deleteCardById:function(t){return e.call("DELETE","/cards/"+t,{})},editCardById:function(t,r){return e.call("PUT","/cards/"+t,r)},inputCard:function(t){return e.call("POST","/cards",t)}}}angular.module("app").service("cardService",e),e.$inject=["baseAPIService"]}(),function(){"use strict";function e(e){return{diaryEntry:function(t){return e.call("POST","/diary",t)},getDiaryById:function(t){return e.call("GET","/diary/"+t,{})},editDiaryById:function(t,r){return e.call("PUT","/diary/"+t,r)},getAllDiaryEntries:function(){return e.call("GET","/diary/all")}}}angular.module("app").service("diaryService",e),e.$inject=["baseAPIService"]}(),function(){"use strict";function e(e){return{getStock:function(){return e.call("GET","/stock",{})},checkRefill:function(){return e.call("POST","/refill",{})}}}angular.module("app").service("productService",e),e.$inject=["baseAPIService"]}(),function(){"use strict";function e(e,t){let r=this;r.cardOptions=e.cardOptions,r.cardData=e.cardData,r.groupInfo=e.groupData,r.expand=function(){t.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/modules/client/cards/expanded/card-base.expanded.html",size:"md modal-dialog-centered",controller:"cardExpandedController",controllerAs:"cardExpandedController",resolve:{options:()=>r.cardOptions,data:()=>r.cardData,group:()=>r.groupInfo}}).result.then(e=>{r.cardOptions.onChange&&r.cardOptions.onChange(e)}).catch(e=>{})},r.contextMenuOptions=[{text:"Edit",click:function(){r.expand()}},{text:"Share",click:function(){if(r.cardOptions.getShareData){let e=r.cardOptions.getShareData();if(!e.title||!e.text)throw error("Cannot share the given object");if(navigator.share)navigator.share(e);else{let t=angular.element(`<a href="mailto:x@x.com?subject=${e.title}&amp;body=${e.text}">Link</a>`);t.appendTo("body"),t.trigger("click"),console.log(t)}}}},{text:"Delete",click:function(e,t){angular.element(t.delegateTarget).remove(),cardService.deleteCardById(cardExpandedController.data.id)}}]}angular.module("app").controller("cardBaseController",e),e.$inject=["$scope","$uibModal"]}(),function(){"use strict";function e(e,t,r,a,o){let n=this;n.options=r,n.data=JSON.parse(JSON.stringify(a)),n.group=o,n.editingTitle=!1,n.getChanged=function(){let e={};return Object.keys(a).forEach(t=>{JSON.stringify(a[t])!==JSON.stringify(n.data[t])&&(e[t]=n.data[t])}),e},n.toggleTitleEdit=function(){n.editingTitle=!n.editingTitle,n.editingTitle&&t(()=>{angular.element("#modal-name-input").trigger("focus")})},n.save=function(){e.close(n.getChanged())},n.close=function(){e.dismiss()}}angular.module("app").controller("cardExpandedController",e),e.$inject=["$uibModalInstance","$timeout","options","data","group"]}(),function(){"use strict";function e(e,t,r){let a=this;a.data=t.groupData,a.groupInfo={name:a.data.name},a.contextMenuOptions=[{text:"Delete",click:function(e,t){angular.element(t.delegateTarget).remove()}}],a.addCard=function(e){let t={name:"Card "+(a.data.cards.length+1),type:e,category:e,group:a.data.name};switch(e){case"Text":t.text="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.";break;case"Reminder":t.reminderList=[];break;case"To-do list":t.list=[];break;case"Meeting":t.meeting={date:Date.now(),time:Date.now(),link:"https://asd.com/qwe-123-asd",documents:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."};break;case"Grocery stock":t.inventory=[];break;case"Grocery refill":t.refill=[],t.refillFreq=[],t.startDate=new Date}a.data.cards.push(t),r.inputCard(t)},t.$watch(function(){return a.data.name},function(e){a.groupInfo.name=e})}angular.module("app").controller("cardGroupController",e),e.$inject=["$rootScope","$scope","cardService"]}(),function(){"use strict";function e(e){let t=this;t.options={expandedSrc:"app/modules/client/cards/expanded/card-meeting.expanded.html",onChange:e=>{Object.keys(e).forEach(r=>{t.data[r]=e[r]}),cardService.editCardById(t.data.id,t.data)},getShareData:()=>({title:t.data.name,text:"User has decided to share meeting on "+t.data.meeting.date+" at "+t.data.meeting.time+".\n The url for the meeting is "+t.data.meeting.link+".\n Additional details: "+t.data.meeting.documents})},t.data=e.data,t.groupInfo=e.groupInfo}angular.module("app").controller("cardMeetingController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){let t=this;t.meeting=e.cardExpandedController.data.meeting,t.datePopup={addDate:!1},t.toggleDatePopup=function(e){t.datePopup[e]=!t.datePopup[e]}}angular.module("app").controller("cardMeetingExpandedController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){let t=this;t.options={expandedSrc:"app/modules/client/cards/expanded/card-refill.expanded.html",onChange:e=>{Object.keys(e).forEach(r=>{t.data[r]=e[r]}),cardService.editCardById(t.data.id,t.data)},getShareData:()=>{return t.data.refill.forEach(function(e){"".concat("Item - "+e.item+"Quantity - "+e.quantity+"\n")}),{title:t.data.name,text:"User has shared the scheduled refill of these items into the inventory: \nStarting from "+t.data.startDate+"\nWith frequency set as: "+t.data.refillFreq}}},t.data=e.data,t.groupInfo=e.groupInfo}angular.module("app").controller("cardRefillController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){let t=this;t.data=e.cardExpandedController.data,t.refill=e.cardExpandedController.data.refill,t.refillFreq=e.cardExpandedController.data.refillFreq,t.startDate=e.cardExpandedController.data.startDate,t.datePopup={addDate:!1},t.groceriesList=[{id:1,label:"Milk"},{id:2,label:"Eggs"},{id:3,label:"Rice"},{id:4,label:"Water"},{id:5,label:"Curd"}],t.selectedModel=[],t.searchSettings={enableSearch:!0,showCheckAll:!1,showUncheckAll:!1,dynamicTitle:!1,styleActive:!0,buttonClasses:"btn-outline-light btn-transparent btn-transparent-light px-0"},t.selectTexts={buttonDefaultText:"Add/Remove items to card"},t.freqSettings={enableSearch:!1,showCheckAll:!1,showUncheckAll:!1,dynamicTitle:!0,styleActive:!0,buttonClasses:"btn-outline-light btn-transparent btn-transparent-light px-0",selectionLimit:1,smartButtonMaxItems:1},t.frequencies=[{id:"1",label:"Once"},{id:"2",label:"Daily"},{id:"3",label:"Weekly"},{id:"4",label:"Monthly"}],t.addToRefiller=function(){angular.forEach(t.selectedModel,function(e){t.refill.push({item:e.label,quantity:1}),t.selectedModel=[]})},t.remove=function(e){t.data.refill.splice(t.data.refill.indexOf(e),1)},t.toggleDatePopup=function(e){t.datePopup[e]=!t.datePopup[e]}}angular.module("app").controller("cardRefillExpandedController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){let t=this;t.options={expandedSrc:"app/modules/client/cards/expanded/card-reminder.expanded.html",onChange:e=>{Object.keys(e).forEach(r=>{t.data[r]=e[r]}),cardService.editCardById(t.data.id,t.data)},getShareData:()=>{return t.data.reminderList.forEach(function(e){"".concat("Date - "+e.date+" Time - "+e.time+"\n")}),{title:t.data.name,text:"User has shared these reminder details with you: \n"}}},t.data=e.data,t.groupInfo=e.groupInfo}angular.module("app").controller("cardReminderController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){let t=this;t.reminderList=e.cardExpandedController.data.reminderList,t.date=Date.now(),t.time=Date.now(),t.datePopup={addDate:!1},t.addReminder=function(){t.reminderList.push({date:t.date,time:t.time,remove:!1}),t.date=Date.now(),t.time=Date.now()},t.removeReminder=function(e){let r=t.reminderList;e.remove=!0,t.reminderList=[],angular.forEach(r,function(e){e.remove||t.reminderList.push(e)})},t.removeAll=function(){t.reminderList=[]},t.toggleDatePopup=function(e){t.datePopup[e]=!t.datePopup[e]}}angular.module("app").controller("cardReminderExpandedController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){let t=this;t.options={expandedSrc:"app/modules/client/cards/expanded/card-stock.expanded.html",onChange:e=>{Object.keys(e).forEach(r=>{t.data[r]=e[r]}),cardService.editCardById(t.data.id,t.data)},getShareData:()=>{return t.data.inventory.forEach(function(e){e.item,e.quantity}),{title:t.data.name,text:"User has shared the following inventory details: \n"}}},t.data=e.data,t.groupInfo=e.groupInfo}angular.module("app").controller("cardStockController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t){let r=this;r.inventory=e.cardExpandedController.data.inventory,r.groceriesList=t.getStock(),r.selectedModel=[],r.searchSettings={enableSearch:!0,showCheckAll:!1,showUncheckAll:!1,dynamicTitle:!1,styleActive:!0,buttonClasses:"btn-outline-light btn-transparent btn-transparent-light px-0"},r.selectTexts={buttonDefaultText:"Add/Remove items to card"},r.addToInventory=function(){angular.forEach(r.selectedModel,function(e){r.inventory.push({item:e.label,quantity:1}),r.selectedModel=[]})},r.remove=function(e){r.inventory.splice(r.inventory.indexOf(e),1)}}angular.module("app").controller("cardStockExpandedController",e),e.$inject=["$scope","productService"]}(),function(){"use strict";function e(e){let t=this;t.options={expandedSrc:"app/modules/client/cards/expanded/card-text.expanded.html",onChange:e=>{Object.keys(e).forEach(r=>{t.data[r]=e[r]}),cardService.editCardById(t.data.id,t.data)},getShareData:()=>({title:t.data.name,text:"User has shared this text with you: "+t.data.text})},t.data=e.data,t.groupInfo=e.groupInfo}angular.module("app").controller("cardTextController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){this.data=e.cardExpandedController.data}angular.module("app").controller("cardTextExpandedController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){let t=this;t.todoList=e.cardExpandedController.data.list,t.task="",t.todoAdd=function(){t.todoList.push({todoText:t.task,done:!1}),t.task=""},t.remove=function(){t.todoList=t.todoList.filter(e=>!e.done)},t.removeAll=function(){t.todoList=[]},t.completedTasksPresent=function(){return t.todoList.filter(e=>e.done).length>0}}angular.module("app").controller("cardToDoListExpandedController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){let t=this;t.options={expandedSrc:"app/modules/client/cards/expanded/card-to-do-list.expanded.html",onChange:e=>{Object.keys(e).forEach(r=>{t.data[r]=e[r]}),cardService.editCardById(t.data.id,t.data)},getShareData:()=>{let e="";return e=t.data.list.map(e=>e.todoText).join("\n"),console.log(e),{title:t.data.name,text:"User wants to share the following tasks: \n"+e}}},t.data=e.data,t.groupInfo=e.groupInfo}angular.module("app").controller("cardToDoListController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){let t=this;t.calendarOptions={calendarView:"month",viewDate:moment(),viewTitle:"Your Diary",events:[],selectedDate:new Date},t.dummy="Your diary entry",t.original=[{date:new Date(moment().hour(0).minutes(0).seconds(0).milliseconds(0)),heading:"Lorem",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},{date:new Date(moment().hour(0).minutes(0).seconds(0).milliseconds(0).subtract(1,"day")),heading:"Ipsum dolor",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}],t.data=JSON.parse(JSON.stringify(t.original)),t.getCurrentDate=function(){return new Date(t.calendarOptions.viewDate)},t.changeDate=function(e){t.calendarOptions.selectedDate=e},t.findDateIndex=function(e,t){for(let r=0;r<e.length;r++)if(0==moment.duration(moment(e[r]).diff(moment(t))).days())return r;return-1},t.getDiaryInfo=function(){let e=t.findDateIndex(t.data.map(e=>e.date),t.calendarOptions.selectedDate);return-1!=e?e:(t.data.push({date:new Date(t.calendarOptions.selectedDate),heading:moment(t.calendarOptions.selectedDate).format("MMMM Do"),text:"Your diary entry"}),t.data.length-1)},e.onBefore({from:"diary"},e=>{for(let e=0;e<t.data.length;e++){-1==t.findDateIndex(t.original.map(e=>e.date),t.data[e].date)?console.log(`Data added for ${t.data[e].date}`):JSON.stringify(t.data[e])!=JSON.stringify(t.original[e])&&console.log(`Data changed for ${t.data[e].date}`)}})}angular.module("app").controller("diaryController",e),e.$inject=["$transitions"]}(),function(){"use strict";function e(e,t,r,a,o){e.$on("$includeContentLoaded",function(){t.helpers.uiHandleHeader()});let n=this;n.toggleSidebar=function(){t.helpers.uiHandleSidebar()},n.hideExtra=!0,n.logout=function(){t.Auth.logout()},o.onBefore({},e=>{e.to().data&&e.to().data.unAuth?n.hideExtra=!0:n.hideExtra=!1}),o.onSuccess({},e=>{e.to().data&&e.to().data.unAuth?n.hideExtra=!0:n.hideExtra=!1})}angular.module("app").controller("headerController",e),e.$inject=["$scope","$rootScope","$state","$stateParams","$transitions"]}(),function(){"use strict";function e(e,t){let r=this;r.cardGroups={},t.getAllGroups().then(e=>{0!=Object.keys(e.data)?r.cardGroups=e.data:r.cardGroups=new Array}),r.addGroup=function(){r.cardGroups.push({name:`Cards ${r.cardGroups.length+1}`,cards:[]})}}angular.module("app").controller("homeController",e),e.$inject=["$rootScope","cardGroupService"]}(),function(){"use strict";function e(e,t){let r=this;r.loginForm={},r.loginFailed=!1,r.submit=function(a){a&&e.Auth.login(r.loginForm).then(e=>{t.go("home")}).catch(e=>{r.loginFailed=!0})}}angular.module("app").controller("loginController",e),e.$inject=["$rootScope","$state"]}(),function(){"use strict";function e(e,t){let r=this;r.otp="",r.verifyFailed=!1,r.otpsent=!1,r.otpOptions={size:6,type:"text",onDone:e=>{},onChange:e=>{r.otp=""+e}},r.confirm,r.sendOTP=function(){firebase.auth().signInWithPhoneNumber(e.Auth.getUserDetails().phone,new firebase.auth.RecaptchaVerifier("send-otp",{size:"invisible"})).then(e=>{r.confirm=e,t(()=>{r.otpsent=!0})})},r.phone=e.Auth.getUserDetails().phone,r.verify=function(){r.confirm.confirm(r.otp).then(t=>{e.Auth.verifyPhone()}).catch(e=>{r.verifyFailed=!0})}}angular.module("app").controller("phoneVerifyController",e),e.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function e(e,t){let r=this;r.registerForm={username:"",occupation:"Student"},r.dropdownstatus={isopen:!1},r.occupations=["Student","Job-Seeker","Employed","Home-Maker"],r.checkPasswordMatch=function(e){r.registerForm.password==r.registerForm.passwordrepeat?e.passwordrepeat.$setValidity("mismatch",!0):e.passwordrepeat.$setValidity("mismatch",!1)},r.checkUniqueUsername=function(t){e.Auth.checkUniqueUsername(r.registerForm.username).then(e=>{t.username.$setValidity("unique",!1),console.log(e)}).catch(e=>{t.username.$setValidity("unique",!0)})},r.toggleDropdown=function(){r.dropdownstatus.isopen=!r.dropdownstatus.isopen},r.removeUniqueValidation=function(e,t){e[t].$setValidity("unique",!0)},r.submit=function(t,a){a&&e.Auth.register({username:r.registerForm.username,password:r.registerForm.password,email:r.registerForm.email,phone:r.registerForm.phone.split(" ").join(""),profession:r.registerForm.occupation}).then(e=>{-1!=e.data.msg.indexOf("error")&&-1!=e.data.msg.indexOf("E1100")&&t[e.data.msg.match("keyValue': {'([a-z]*)'")[1]].$setValidity("unique",!1)}).catch(e=>{console.log("regerr",e)})}}angular.module("app").controller("registerController",e),e.$inject=["$rootScope","$scope"]}(),function(){"use strict";function e(e){this.email=e.Auth.getUserDetails().email,e.Auth.sendVerificationEmail()}angular.module("app").controller("verifyEmailController",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e,t){let r=this;r.verifyFailed=!1,e.Auth.verifyEmail(t.params.code).then(e=>{}).catch(e=>{r.verifyFailed=!0})}angular.module("app").controller("verifyingEmailController",e),e.$inject=["$rootScope","$state"]}(),function(){"use strict";function e(e,t){return{restrict:"E",templateUrl:"app/modules/footer/app-footer.html",replace:!0}}angular.module("app").directive("appFooter",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t,r){return{restrict:"E",templateUrl:"app/modules/header/app-header.html",controller:"headerController",controllerAs:"headerController",replace:!0}}angular.module("app").directive("appHeader",e),e.$inject=["$rootScope","$compile","$transitions"]}(),function(){"use strict";function e(e,t){return{restrict:"E",templateUrl:"app/modules/sidebar/app-sidebar.html",replace:!0}}angular.module("app").directive("appSidebar",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{cardOptions:"=options",cardData:"=data",groupData:"=group"},templateUrl:"app/modules/client/cards/normal/card-base.html",controller:"cardBaseController",controllerAs:"cardBaseController",replace:!0}}angular.module("app").directive("cardBase",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{groupData:"=data"},templateUrl:"app/modules/client/cards/card-group.html",controller:"cardGroupController",controllerAs:"cardGroupController",replace:!0}}angular.module("app").directive("cardGroup",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-meeting.html",controller:"cardMeetingController",controllerAs:"cardMeetingController",replace:!0}}angular.module("app").directive("cardMeeting",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-refill.html",controller:"cardRefillController",controllerAs:"cardRefillController",replace:!0}}angular.module("app").directive("cardRefill",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-reminder.html",controller:"cardReminderController",controllerAs:"cardReminderController",replace:!0}}angular.module("app").directive("cardReminder",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-stock.html",controller:"cardStockController",controllerAs:"cardStockController",replace:!0}}angular.module("app").directive("cardStock",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-text.html",controller:"cardTextController",controllerAs:"cardTextController",replace:!0}}angular.module("app").directive("cardText",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{data:"=",groupInfo:"=group"},templateUrl:"app/modules/client/cards/normal/card-to-do-list.html",controller:"cardToDoListController",controllerAs:"cardToDoListController",replace:!0}}angular.module("app").directive("cardToDoList",e),e.$inject=["$rootScope","$compile"]}(),function(){"use strict";function e(e){return{restrict:"A",require:"?ngModel",link:function(t,r,a,o){function n(){let e=r.text();a.stripBr&&"<br>"==e&&(e=""),o.$setViewValue(e)}o&&a.contenteditable&&(o.$render=function(){r.html(e.getTrustedHtml(o.$viewValue||""))},r.on("keyup change",function(){t.$evalAsync(n)}),r.on("click",function(){r.attr("contenteditable","true")}),r.on("blur",function(){r.attr("contenteditable","false")}))}}}angular.module("app").directive("ngContenteditable",e),e.$inject=["$sce"]}(),function(){"use strict";function e(){return{restrict:"A",replace:!1,link:function(e,t,r){angular.element(t).inputSpinner()}}}angular.module("app").directive("ngNumberInput",e),e.$inject=["$rootScope","$compile"]}();